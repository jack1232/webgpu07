(()=>{"use strict";var e={949:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckWebGPU=t.InitGPU=t.CreateGPUBuffer=void 0,t.CreateGPUBuffer=(e,t,r=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST)=>{const n=e.createBuffer({size:t.byteLength,usage:r,mappedAtCreation:!0});return new Float32Array(n.getMappedRange()).set(t),n.unmap(),n},t.InitGPU=()=>r(void 0,void 0,void 0,(function*(){var e;const r=t.CheckWebGPU();if(r.includes("Your current browser does not support WebGPU!"))throw console.log(r),"Your current browser does not support WebGPU!";const n=document.getElementById("canvas-webgpu"),o=yield null===(e=navigator.gpu)||void 0===e?void 0:e.requestAdapter(),a=yield null==o?void 0:o.requestDevice(),i=n.getContext("webgpu"),u=window.devicePixelRatio||1,c=[n.clientWidth*u,n.clientHeight*u],s=i.getPreferredFormat(o);return i.configure({device:a,format:s,size:c}),{device:a,canvas:n,format:s,context:i}})),t.CheckWebGPU=()=>{let e="Great, your current browser supports WebGPU!";return navigator.gpu||(e='Your current browser does not support WebGPU! Make sure you are on a system \n                     with WebGPU enabled. Currently, SPIR-WebGPU is only supported in  \n                     <a href="https://www.google.com/chrome/canary/">Chrome canary</a>\n                     with the flag "enable-unsafe-webgpu" enabled. See the \n                     <a href="https://github.com/gpuweb/gpuweb/wiki/Implementation-Status"> \n                     Implementation Status</a> page for more details.                   \n                    '),e}},519:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(949),i=o(r(508));n(void 0,void 0,void 0,(function*(){const e=yield a.InitGPU(),t=e.device,r=new Float32Array([-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5]),n=new Float32Array([1,0,0,0,1,0,1,1,0,1,1,0,0,1,0,0,0,1]),o=a.CreateGPUBuffer(t,r),u=a.CreateGPUBuffer(t,n),c=t.createRenderPipeline({vertex:{module:t.createShaderModule({code:i.default}),entryPoint:"vs_main",buffers:[{arrayStride:8,attributes:[{shaderLocation:0,format:"float32x2",offset:0}]},{arrayStride:12,attributes:[{shaderLocation:1,format:"float32x3",offset:0}]}]},fragment:{module:t.createShaderModule({code:i.default}),entryPoint:"fs_main",targets:[{format:e.format}]},primitive:{topology:"triangle-list"}}),s=t.createCommandEncoder(),f=e.context.getCurrentTexture().createView(),l=s.beginRenderPass({colorAttachments:[{view:f,clearValue:{r:.2,g:.247,b:.314,a:1},loadValue:{r:.2,g:.247,b:.314,a:1},loadOp:"clear",storeOp:"store"}]});l.setPipeline(c),l.setVertexBuffer(0,o),l.setVertexBuffer(1,u),l.draw(6),l.end(),t.queue.submit([s.finish()])}))},508:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="// vertext shader\r\n\r\nstruct Output {\r\n    @builtin(position) Position : vec4<f32>;\r\n    @location(0) vColor : vec4<f32>;\r\n};\r\n\r\n@stage(vertex)\r\nfn vs_main(@location(0) pos: vec4<f32>, @location(1) color: vec4<f32>) -> Output {\r\n    var output: Output;\r\n    output.Position = pos;\r\n    output.vColor = color;\r\n    return output;\r\n}\r\n\r\n// fragment shader\r\n\r\n@stage(fragment)\r\nfn fs_main(@location(0) vColor: vec4<f32>) -> @location(0) vec4<f32> {\r\n    return vColor;\r\n}"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(519)})();
//# sourceMappingURL=main.bundle.js.map